---
name: "Test Installation of KaaS-CLI"
on: 
  pull_request:
    branches:
      - main
  workflow_dispatch:
jobs:
  test-install:
    runs-on: [self-hosted, linux, flyweight]
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Use KaaS Action
        uses: ./ 
        env:
          GITHUB_TOKEN: ${{ secrets.JENKINS_GITHUB_PAT }}
          GIT_USERNAME: rv-jenkins
          GIT_PASSWORD: ${{ secrets.JENKINS_GITHUB_PAT }}

      - name: Test kaas-cli
        shell: bash
        run: |
          kaas-cli --version